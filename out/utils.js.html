<!doctype html>
<html>

<head>
  <meta name="generator" content="JSDoc 3.3.2">
  <meta charset="utf-8">
  <title>Source: utils.js</title>
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Karla:400,400i,700,700i" type="text/css">
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Noto+Serif:400,400i,700,700i" type="text/css">
  <link rel="stylesheet" href="https://brick.a.ssl.fastly.net/Inconsolata:500" type="text/css">
  <link href="css/baseline.css" rel="stylesheet">
</head>

<body onload="prettyPrint()">
  <nav id="jsdoc-navbar" role="navigation" class="jsdoc-navbar">
    <div id="jsdoc-navbar-container">
      <div id="jsdoc-navbar-content">
        <a href="index.html" class="jsdoc-navbar-package-name">Home</a>
      </div>
    </div>
  </nav>
  <div id="jsdoc-body-container">
    <div id="jsdoc-content">
      <div id="jsdoc-content-container">
        <div id="jsdoc-banner" role="banner">
        </div>
        <div id="jsdoc-main" role="main">
          <header class="page-header">
            <h1>Source: utils.js</h1>
          </header>
          <article>
            <pre class="prettyprint linenums"><code>/**
 * Funzioni utili per il calcolo del MUD Telematico
 * @module utils
 * @memberof module:mud
 * @author Denny Biasiolli
 */

/**
 * Callback generica per le esportazioni di record.
 * @callback recordExportCallback
 * @param {boolean} err Eventuale errore durante l&#x27;esportazione
 * @param {string} response Stringa esportata
 */

/**
 * Oggetto generico composto da valore e unità di misura.
 * @typedef oggettoValoreUM
 * @type Object.&amp;lt;number, string&gt;
 * @property {number} valore Valore
 * @property {string} um Unità di misura, &#x27;1&#x27;=kg, &#x27;2&#x27;=t
 */

var moment = require(&#x27;moment&#x27;);

/** Formatta un valore numerico nella corrispondente stringa composta da n interi e n decimali
 * @param {number} valore Il valore da formattare
 * @param {number} interi Il numero di interi da visualizzare
 * @param {number} [decimali] Il numero di decimali da visualizzare, default = 0
 * @return {string} Stringa formattata composta da n cifre intere &#x27;,&#x27; come separatore e n cifre decimali
 */
exports.formattaNumero = function(valore, interi, decimali) {
    if(valore == null || isNaN(valore)) valore = 0;
    if(typeof(valore) !== &#x27;number&#x27;) valore = Number(valore);
    if(interi == null || isNaN(interi)) interi = 0;
    var dimensioneTot = interi + (decimali ? decimali+1 : 0);
    var valoreDaFormattare = (decimali ? valore.toFixed(decimali) : valore);
    var strRet = (Array(dimensioneTot+1).join(&#x27;0&#x27;) + valoreDaFormattare.toString()).slice(-dimensioneTot);
    return (decimali ? strRet.replace(&#x27;.&#x27;, &#x27;,&#x27;) : strRet);
}

/** Formatta una stringa
 * @param {string} valore Stringa da formattare
 * @param {number} lunghezza Lunghezza della stringa da fornire in output
 * @param {boolean} [bypassaUpperCase] evita di fare l&#x27;UpperCase della stringa, default = False
 * @return {string} Stringa formattata con spazi di riempimento a destra o tagliata per la lunghezza richiesta
 */
exports.formattaStringa = function(valore, lunghezza, bypassaUpperCase) {
    if(valore == null) valore = &#x27;&#x27;;
    if(lunghezza == null) lunghezza = 0;
    if(typeof(valore) !== &#x27;string&#x27;) valore = valore.toString();
    if(!bypassaUpperCase) valore = valore.toUpperCase();
    return (valore + Array(lunghezza+1).join(&#x27; &#x27;)).slice(0, lunghezza);
}

/** Formatta un valore boolean nella corrispondente stringa
 * @param {boolean} valore Valore booleano da formattare
 * @return {string} &#x27;1&#x27; se True, &#x27;0&#x27; se False
 */
exports.formattaBoolean = function(valore) {
    if(valore)
        return &#x27;1&#x27;;
    else
        return &#x27;0&#x27;;
}

/** Formatta un valore Date secondo il formato specificato.
 * @param {date} valore Valore Date(), se null restituisce stringa vuota della lunghezza del formato specificato
 * @param {date} formato Formato da utilizzare per l&#x27;output, per i formati fare riferimento a Moment.js (http://momentjs.com/)
 * @return {string} Stringa formattata secondo il formato specificato.
 */
exports.formattaDataOra = function(valore, formato) {
    if(!valore) return Array(formato.length+1).join(&#x27; &#x27;);
    return moment(valore).format(formato);
}

/** Converte in oggetto il valore indicato, se superiore a limitValue
 * @param {number} valore Valore da convertire se superiore a limitValue
 * @param {number} [limitValue] Valore limite da utilizzare per la conversione, default = 1000
 * @return {oggettoValoreUM} Oggetto contenente il valore e l&#x27;unità di misura relativa.
 */
exports.getOggettoValoreUM = function(valore, limitValue) {
    var retObj = {valore: valore, um: &#x27;1&#x27;};
    if(limitValue == null || isNaN(limitValue)) limitValue = 10000000;
    if(retObj.valore &gt;= limitValue){
        retObj.valore = retObj.valore / 1000;
        retObj.um = &#x27;2&#x27;;
    }/* else {
        retObj.valore = retObj.valore;
        retObj.um = &#x27;1&#x27;;
    }*/
    return retObj
}
</code></pre>
          </article>
        </div>
      </div>
      <nav id="jsdoc-toc-nav" role="navigation"></nav>
    </div>
  </div>
  <footer id="jsdoc-footer" class="jsdoc-footer">
    <div id="jsdoc-footer-container">
      <p>
        Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc</a> 3.3.2 on October 14, 2015.
      </p>
    </div>
  </footer>
  <script src="scripts/jquery.min.js"></script>
  <script src="scripts/jquery.cookie.js"></script>
  <script src="scripts/tree.jquery.js"></script>
  <script src="scripts/prettify.js"></script>
  <script src="scripts/jsdoc-toc.js"></script>
  <script src="scripts/linenumber.js"></script>
  <script src="scripts/scrollanchor.js"></script>
</body>

</html>